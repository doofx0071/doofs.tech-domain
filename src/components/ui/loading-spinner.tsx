import { cn } from "@/lib/utils";

interface LoadingSpinnerProps {
    className?: string;
    size?: number;
    showText?: boolean;
    text?: string;
}

export function LoadingSpinner({
    className,
    size = 46,
    showText = false,
    text = "Loading..."
}: LoadingSpinnerProps) {
    return (
        <div className={cn("flex flex-col items-center justify-center", className)}>
            <svg
                width={size}
                height={size}
                viewBox="0 0 92 87"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="text-foreground mb-2"
            >
                {/* Doofs Logo Configuration */}
                {/* Original ViewBox: 0 0 375 375 */}
                {/* Target Size: ~34x34 centered in 92x87 */}
                {/* Scale: 34/375 â‰ˆ 0.091 */}
                {/* Offset X: (92 - 34)/2 = 29 */}
                {/* Offset Y: (87 - 34)/2 = 26.5 */}
                <g transform="translate(29 26.5) scale(0.091)">
                    <defs>
                        <clipPath id="logo-clip">
                            <path d="M 1 16.796875 L 302 16.796875 L 302 358.046875 L 1 358.046875 Z" clipRule="nonzero" />
                        </clipPath>
                    </defs>
                    <g clipPath="url(#logo-clip)">
                        <path fill="currentColor" d="M 86.617188 269.628906 C 86.601562 269.609375 86.585938 269.585938 86.570312 269.566406 C 81.976562 263.167969 81.945312 254.546875 81.738281 246.996094 C 81.507812 238.742188 81.277344 229.046875 83.300781 220.394531 C 84.125 216.875 85.320312 213.527344 87.039062 210.523438 C 87.207031 210.226562 89.191406 207.035156 89.945312 205.925781 L 194.15625 205.550781 L 194.15625 171.238281 L 227.570312 171.238281 L 227.570312 205.550781 L 263.753906 205.550781 L 263.753906 170.578125 L 229.316406 170.578125 L 229.316406 133.175781 L 276.59375 133.175781 L 276.59375 16.816406 L 166.386719 16.816406 L 166.386719 122.515625 L 95.273438 122.515625 C 95.273438 122.515625 67.210938 122.867188 41.265625 141.414062 C 41.261719 141.402344 41.253906 141.394531 41.246094 141.386719 C 41.109375 141.492188 40.976562 141.601562 40.84375 141.710938 C 40.816406 141.730469 40.789062 141.746094 40.761719 141.765625 L 40.765625 141.769531 C 34.597656 146.582031 29.050781 152.140625 23.964844 158.089844 C 21.773438 160.597656 19.789062 163.269531 17.898438 166 C 13.886719 172.304688 10.230469 178.90625 7.742188 185.972656 C 6.195312 189.96875 5.070312 194.085938 4.167969 198.261719 C 0.03125 211.933594 1.78125 226.304688 1.4375 240.359375 C 1.617188 249.171875 0.996094 258.167969 1.660156 266.980469 C 1.660156 266.980469 1.679688 267.140625 1.699219 267.460938 C 1.941406 269.671875 3.125 279.40625 7.460938 291.53125 C 7.820312 292.554688 8.222656 293.621094 8.644531 294.683594 C 9.269531 296.269531 9.949219 297.898438 10.691406 299.542969 C 11.71875 301.851562 12.859375 304.179688 14.125 306.53125 C 15.351562 308.976562 16.734375 311.328125 18.324219 313.554688 C 21.917969 319.035156 26.292969 324.398438 31.574219 329.292969 C 32.214844 329.917969 32.878906 330.5 33.558594 331.101562 C 33.902344 331.382812 34.242188 331.683594 34.605469 331.984375 C 34.855469 332.191406 35.117188 332.398438 35.371094 332.605469 L 35.371094 332.609375 C 58.953125 357.402344 89.320312 358.105469 89.320312 358.105469 L 301.367188 358.105469 L 301.367188 325.460938 L 261.410156 325.460938 L 261.410156 269.628906 L 86.617188 269.628906" fillOpacity="1" fillRule="nonzero" />
                    </g>
                    <path fill="currentColor" d="M 271.875 186.535156 L 327.476562 186.535156 L 327.476562 242.136719 L 271.875 242.136719 Z M 271.875 186.535156" fillOpacity="1" fillRule="nonzero" />
                    <path fill="currentColor" d="M 294.40625 265.355469 L 332.8125 265.355469 L 332.8125 303.757812 L 294.40625 303.757812 Z M 294.40625 265.355469" fillOpacity="1" fillRule="nonzero" />
                    <path fill="currentColor" d="M 349.710938 225.050781 L 375 225.050781 L 375 250.339844 L 349.710938 250.339844 Z M 349.710938 225.050781" fillOpacity="1" fillRule="nonzero" />
                </g>

                {/* Spinning Ring */}
                <g className="origin-center animate-spin" style={{ transformOrigin: '46px 43px', animationDuration: '3s' }}>
                    <path d="M77.8202 29.21L89.5402 25.21C89.9645 25.0678 90.4327 25.1942 90.7277 25.5307C91.0227 25.8673 91.0868 26.348 90.8902 26.75L87.0002 34.62C86.8709 34.8874 86.6407 35.0924 86.3602 35.19C86.0798 35.2806 85.7751 35.2591 85.5102 35.13L77.6502 31.26C77.2436 31.0643 76.9978 30.6401 77.0302 30.19C77.0677 29.7323 77.3808 29.3438 77.8202 29.21Z" fill="hsl(var(--muted-foreground) / 0.8)" />
                    <path d="M5.12012 40.75C6.36707 20.9791 21.5719 4.92744 41.2463 2.61179C60.9207 0.296147 79.4368 12.3789 85.2401 31.32" stroke="hsl(var(--muted-foreground) / 0.8)" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M14.18 57.79L2.46001 61.79C2.03313 61.9358 1.56046 61.8088 1.2642 61.4686C0.967927 61.1284 0.906981 60.6428 1.11001 60.24L5.00001 52.38C5.12933 52.1127 5.35954 51.9076 5.64001 51.81C5.92044 51.7194 6.22508 51.7409 6.49001 51.87L14.35 55.74C14.7224 55.9522 14.9394 56.36 14.9073 56.7874C14.8753 57.2149 14.5999 57.5857 14.2 57.74L14.18 57.79Z" fill="hsl(var(--muted-foreground) / 0.8)" />
                    <path d="M86.9998 45.8C85.9593 65.5282 70.9982 81.709 51.4118 84.2894C31.8254 86.8697 13.1841 75.1156 7.06982 56.33" stroke="hsl(var(--muted-foreground) / 0.8)" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" />
                </g>
            </svg>
            {showText && <p className="text-muted-foreground animate-pulse font-mono text-xs tracking-wider">{text}</p>}
        </div>
    );
}

export function GlobalLoading() {
    return (
        <div className="min-h-screen bg-background flex flex-col items-center justify-center p-4">
            <LoadingSpinner size={64} showText text="INITIALIZING SYSTEM..." />
        </div>
    );
}
